// Complex loop patterns with variable declarations

// Test 1: Matrix-like operations (2D array simulation)
print("=== Test 1: Matrix Operations ===")
var rows = 3
var cols = 3
var matrix_sum = 0

var row = 0
for(row = 0; row < rows; row = row + 1) {
    var row_product = 1
    var col = 0
    for(col = 0; col < cols; col = col + 1) {
        var cell = row * cols + col + 1
        var cell_squared = cell * cell
        matrix_sum = matrix_sum + cell
        row_product = row_product * cell
        print("Cell[", row, ",", col, "] =", cell, "squared =", cell_squared)
    }
    print("Row", row, "product:", row_product)
}
print("Matrix sum:", matrix_sum)

// Test 2: Fibonacci-like pattern using loops
print("\n=== Test 2: Fibonacci Pattern ===")
var fib_count = 10
var prev = 0
var curr = 1

var fib_i = 0
for(fib_i = 0; fib_i < fib_count; fib_i = fib_i + 1) {
    print("Fib[", fib_i, "] =", prev)
    var next = prev + curr
    prev = curr
    curr = next
}

// Test 3: Countdown loops with nested operations
print("\n=== Test 3: Countdown Loops ===")
var outer_count = 5
while(outer_count > 0) {
    var countdown_value = outer_count * 10
    print("Countdown:", outer_count, "value:", countdown_value)
    
    var inner_count = outer_count
    while(inner_count > 0) {
        var inner_value = inner_count * 2
        print("  Inner countdown:", inner_count, "value:", inner_value)
        inner_count = inner_count - 1
    }
    outer_count = outer_count - 1
}

// Test 4: Accumulator pattern with multiple accumulators
print("\n=== Test 4: Multiple Accumulators ===")
var sum_even = 0
var sum_odd = 0
var product_all = 1
var count_total = 0

var num = 0
for(num = 1; num <= 10; num = num + 1) {
    var is_even = (num / 2) * 2
    if(is_even == num) {
        sum_even = sum_even + num
        print("Even:", num, "sum_even:", sum_even)
    }
    if(is_even != num) {
        sum_odd = sum_odd + num
        print("Odd:", num, "sum_odd:", sum_odd)
    }
    product_all = product_all * num
    count_total = count_total + 1
}
print("Sum even:", sum_even, "Sum odd:", sum_odd)
print("Product all:", product_all, "Count:", count_total)

// Test 5: Pyramid pattern
print("\n=== Test 5: Pyramid Pattern ===")
var pyramid_height = 4
var p_row = 0
for(p_row = 1; p_row <= pyramid_height; p_row = p_row + 1) {
    var stars = 0
    var star_count = p_row * 2 - 1
    print("Row", p_row, "stars:", star_count)
    
    for(stars = 0; stars < star_count; stars = stars + 1) {
        var star_pos = stars + 1
        // Simulating star printing
    }
}

// Test 6: Nested accumulation with conditions
print("\n=== Test 6: Conditional Accumulation ===")
var total_score = 0
var player = 0
for(player = 1; player <= 3; player = player + 1) {
    var player_score = 0
    var round = 0
    for(round = 1; round <= 4; round = round + 1) {
        var base_points = player * round
        var bonus = 0
        
        // Add bonus if round is even
        var round_check = (round / 2) * 2
        if(round_check == round) {
            bonus = 10
        }
        
        var round_score = base_points + bonus
        player_score = player_score + round_score
        print("Player", player, "Round", round, "Score:", round_score)
    }
    total_score = total_score + player_score
    print("Player", player, "total:", player_score)
}
print("Grand total:", total_score)

// Test 7: Multiplication table
print("\n=== Test 7: Multiplication Table ===")
var mult_i = 1
for(mult_i = 1; mult_i <= 5; mult_i = mult_i + 1) {
    var mult_j = 1
    for(mult_j = 1; mult_j <= 5; mult_j = mult_j + 1) {
        var product = mult_i * mult_j
        print(mult_i, "x", mult_j, "=", product)
    }
}

// Test 8: Nested while with complex state
print("\n=== Test 8: Complex State Management ===")
var state_a = 0
var state_b = 10
while(state_a < 5 && state_b > 5) {
    var diff = state_b - state_a
    print("State A:", state_a, "State B:", state_b, "Diff:", diff)
    
    var inner_state = 0
    while(inner_state < 2) {
        var combined_state = state_a + state_b + inner_state
        print("  Combined state:", combined_state)
        inner_state = inner_state + 1
    }
    
    state_a = state_a + 1
    state_b = state_b - 1
}

// Test 9: Prime number pattern (simple check)
print("\n=== Test 9: Number Pattern Analysis ===")
var check_num = 2
while(check_num <= 10) {
    var is_prime = 1
    var divisor = 2
    
    while(divisor < check_num) {
        var remainder_check = (check_num / divisor) * divisor
        if(remainder_check == check_num) {
            is_prime = 0
        }
        divisor = divisor + 1
    }
    
    if(is_prime == 1) {
        print(check_num, "is prime")
    }
    if(is_prime == 0) {
        print(check_num, "is not prime")
    }
    
    check_num = check_num + 1
}

// Test 10: Diagonal sum pattern
print("\n=== Test 10: Diagonal Pattern ===")
var diag_size = 4
var diag_sum = 0
var d = 0
for(d = 0; d < diag_size; d = d + 1) {
    var diag_value = d * diag_size + d
    diag_sum = diag_sum + diag_value
    print("Diagonal position", d, "value:", diag_value)
}
print("Diagonal sum:", diag_sum)

print("\n=== All complex pattern tests completed! ===")
